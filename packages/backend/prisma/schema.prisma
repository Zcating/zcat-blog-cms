generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  // provider = "mysql"
}

model Article {
  id                    Int                     @id @default(autoincrement())
  title                 String                  @db.VarChar(255)
  excerpt               String                  @db.Text
  createdAt             DateTime                @default(now()) @db.Timestamp(6)
  updatedAt             DateTime                @default(now()) @db.Timestamp(6)
  content               String                  @db.Text
  createByUserId        Int?
  articleAndArticleTags ArticleAndArticleTags[]

  @@map("article")
}

model ArticleAndArticleTags {
  articleId    Int
  articleTagId Int
  articleTag   ArticleTag @relation(fields: [articleTagId], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "FK_294cb268d5d5b961739598ee49b")
  article      Article    @relation(fields: [articleId], references: [id], onDelete: Cascade, map: "FK_54b2005ea489ec43684104f6ce6")

  @@id([articleId, articleTagId])
  @@index([articleTagId], map: "IDX_294cb268d5d5b961739598ee49")
  @@index([articleId], map: "IDX_54b2005ea489ec43684104f6ce")
  @@map("article_and_article_tags")
}

model ArticleTag {
  id                    Int                     @id @default(autoincrement())
  name                  String                  @unique(map: "IDX_c043c7daa8e5141e909e1cd841") @db.VarChar(255)
  createdAt             DateTime                @default(now()) @db.Timestamp(6)
  updatedAt             DateTime                @default(now()) @db.Timestamp(6)
  articleAndArticleTags ArticleAndArticleTags[]

  @@map("article_tag")
}

model Photo {
  id           Int      @id @default(autoincrement())
  name         String   @db.VarChar(255)
  url          String   @db.VarChar(255)
  createdAt    DateTime @default(now()) @db.Timestamp(6)
  updatedAt    DateTime @default(now()) @db.Timestamp(6)
  albumId      Int?
  thumbnailUrl String   @db.VarChar(255)

  @@map("photo")
}

model PhotoAlbum {
  id          Int      @id @default(autoincrement())
  name        String   @db.VarChar(255)
  createdAt   DateTime @default(now()) @db.Timestamp(6)
  updatedAt   DateTime @default(now()) @db.Timestamp(6)
  coverId     Int?
  description String   @db.VarChar(255)
  available  Boolean  @default(false)

  @@map("photo_album")
}

model User {
  id        Int      @id @default(autoincrement())
  username  String   @unique(map: "IDX_78a916df40e02a9deb1c4b75ed") @db.VarChar(255)
  password  String   @db.VarChar(255)
  email     String   @unique(map: "IDX_e12875dfb3b1d92d7d7c5377e2") @db.VarChar(255)
  createdAt DateTime @default(now()) @db.Timestamp(6)
  updatedAt DateTime @default(now()) @db.Timestamp(6)
  salt      String   @db.VarChar(64)

  @@map("user")
}

model UserInfo {
  id         Int      @id @default(autoincrement())
  name       String   @db.VarChar(255)
  occupation String?  @db.VarChar(255)
  abstract   String?  @db.VarChar(255)
  avatar     String?  @db.VarChar(255)
  aboutMe    String?  @db.Text
  contact    String?  @db.Text
  createdAt  DateTime @default(now()) @db.Timestamp(6)
  updatedAt  DateTime @default(now()) @db.Timestamp(6)
  userId     Int?     @unique(map: "REL_user_info_userId")

  @@map("user_info")
}


model SystemSetting {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now()) @db.Timestamp(6)
  updatedAt DateTime @default(now()) @db.Timestamp(6)
  userId    Int?     @unique(map: "REL_system_setting_userId")

  @@map("system_setting")
}

model Statistic {
  id        Int      @id @default(autoincrement())
  time      DateTime @default(now()) @db.Timestamp(6)
  browser   String?  @db.VarChar(255)
  os        String?  @db.VarChar(255)
  device    String?  @db.VarChar(255)
  deviceId  String?  @db.VarChar(255)
  ip        String   @db.VarChar(45)
  pagePath  String?  @db.VarChar(500)
  pageTitle String?  @db.VarChar(255)
  referrer  String?  @db.VarChar(500)
  createdAt DateTime @default(now()) @db.Timestamp(6)
  updatedAt DateTime @default(now()) @db.Timestamp(6)

  @@index([time])
  @@index([pagePath])
  @@index([ip])
  @@map("statistic")
}